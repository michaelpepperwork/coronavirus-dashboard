<mat-card class="table-card card">
    <loading-mask *ngIf="isLoading; else showTable">
    </loading-mask>

    <ng-template #showTable>
        <h3 class="card__header">
            <span>Country Statistics</span>
            <span class="card__header--cta">
                <mat-form-field>
                    <mat-label>Filter by Country</mat-label>
                    <mat-select (selectionChange)="applyFilter($event)">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let country of countries"
                            [value]="country.Slug">{{country.Country}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </span>


        </h3>
        <mat-card-content>

            <div class="card__table">
                <div class="card__table--content">
                    <table mat-table [dataSource]="dataSource">
                        <!-- Position Column -->
                        <ng-container matColumnDef="Country" sticky>
                            <th mat-header-cell *matHeaderCellDef> Country </th>
                            <td mat-cell *matCellDef="let element">
                                <span (click)="showCountryDetails(element)"
                                    class="clickable-link">
                                    {{element.Country}}
                                </span>
                            </td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="NewConfirmed">
                            <th mat-header-cell *matHeaderCellDef> New Cases
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.NewConfirmed}} </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <ng-container matColumnDef="TotalConfirmed">
                            <th mat-header-cell *matHeaderCellDef> Total Cases
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.TotalConfirmed}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="NewDeaths">
                            <th mat-header-cell *matHeaderCellDef> New Deaths
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.NewDeaths}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="TotalDeaths">
                            <th mat-header-cell *matHeaderCellDef> Total Deaths
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.TotalDeaths}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="NewRecovered">
                            <th mat-header-cell *matHeaderCellDef> New
                                Recoveries
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.NewRecovered}} </td>
                        </ng-container>

                        <!-- Symbol Column -->
                        <ng-container matColumnDef="TotalRecovered">
                            <th mat-header-cell *matHeaderCellDef> Total
                                Recoveries
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{element.TotalRecovered}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns:
                            displayedColumns;"></tr>
                    </table>
                </div>

                <mat-paginator [pageSizeOptions]="[5, 10, 15, 20]"
                    [pageSize]="10"
                    showFirstLastButtons></mat-paginator>
            </div>
        </mat-card-content>

    </ng-template>


</mat-card>
